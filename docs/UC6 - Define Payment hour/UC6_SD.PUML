@startuml
autonumber
'hide footbox
actor "Manager" as ADM

participant ":PaymentUI" as UI
participant ":DefinePaymentController" as CTRL
participant ":Transaction" as TRAN
participant "lpay:Payment\nList" as LPAY


activate ADM
ADM -> UI : The manager of the organization selects the processment cycle of payment transactions.
activate UI
UI --> ADM : The System asks for the day of the month, the time of the day and the recurrence time period (e.g. 7 days).
deactivate UI

ADM -> UI : The Manager inserts the information.
activate UI

UI -> CTRL : newPayment(time, date, nrDays)
activate CTRL


CTRL -> TRAN : pm = getPaymentList()
activate TRAN
deactivate TRAN

CTRL -> LPAY : payment = newPayment(time, date, nrDays)
activate LPAY



LPAY -> PAYMENT** : create(time, date, nrDays)
deactivate LPAY

CTRL -> LPAY : validatesPayment(payment)
activate LPAY
deactivate LPAY

deactivate CTRL

UI --> ADM : shows the information and asks for confirmation.
deactivate UI

ADM -> UI : confirms the data
activate UI

UI -> CTRL : registerPayment()
activate CTRL

CTRL -> LPAY : registersPayment(payment)
activate LPAY

LPAY -> LPAY : validatesPayment(payment)
LPAY -> LPAY : addPayment(payment)
deactivate LPAY
deactivate CTRL

UI -> ADM : informs about the success of the operation
deactivate UI
deactivate ADM



@enduml
